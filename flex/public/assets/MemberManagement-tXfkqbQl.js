import{d as L,r as p,u as U,c as $,o as j,a as r,b as t,n as h,w as D,v as E,e as m,t as n,F as v,f as _,g as S,m as P,h as z,i as B,j as i,k as T}from"./index-jmRsHrpU.js";const V={class:"space-y-6"},A={class:"flex items-center justify-between"},F={class:"flex items-center space-x-4"},N={class:"flex items-center space-x-2"},O={class:"bg-white rounded-lg shadow-soft p-4"},R={key:0,class:"bg-white rounded-lg shadow-soft p-4"},J={class:"flex items-center space-x-4"},q={class:"text-sm text-gray-600"},G=["onClick"],H={class:"bg-white rounded-lg shadow-soft"},I=["checked","onChange"],Q={class:"flex-1"},K={class:"font-medium text-gray-900"},W={class:"text-sm text-gray-500"},X={class:"text-sm"},Y={key:1,class:"grid grid-cols-1 md:grid-cols-3 gap-6 p-6"},Z={class:"flex items-center justify-between mb-4"},ee=["checked","onChange"],te={class:"font-medium text-gray-900"},se={class:"text-sm text-gray-500"},ae={class:"text-sm text-gray-500 mt-2"},oe={class:"text-sm text-gray-500"},ie=L({__name:"MemberManagement",setup(ne){const l=p("list"),d=p(""),u=p([]),o=p(new Set),{list:x,containerProps:f,wrapperProps:b}=U(u,{itemHeight:64}),w=$(()=>u.value.filter(a=>a.name.toLowerCase().includes(d.value.toLowerCase())||a.email.toLowerCase().includes(d.value.toLowerCase()))),k=T(async a=>{try{const c=await(await fetch(`/api/method/gym_management.api.search_members?query=${a}`)).json();u.value=c.message}catch(s){console.error("Error searching members:",s)}},300),C=async a=>{try{await fetch("/api/method/gym_management.api.bulk_member_action",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:a,members:Array.from(o.value)})}),await y()}catch(s){console.error("Error performing bulk action:",s)}},M=async()=>{try{const e=await(await fetch("/api/method/gym_management.api.export_members")).blob(),c=window.URL.createObjectURL(e),g=document.createElement("a");g.href=c,g.download="members.csv",g.click()}catch(a){console.error("Error exporting members:",a)}},y=async()=>{try{const e=await(await fetch("/api/method/gym_management.api.get_members")).json();u.value=e.message}catch(a){console.error("Error fetching members:",a)}};return j(()=>{y()}),(a,s)=>(i(),r("div",V,[t("div",A,[s[4]||(s[4]=t("h1",{class:"text-2xl font-bold text-gray-900"},"Member Management",-1)),t("div",F,[t("div",N,[t("button",{onClick:s[0]||(s[0]=e=>l.value="list"),class:h(["p-2 rounded",{"bg-primary text-white":l.value==="list"}])}," List ",2),t("button",{onClick:s[1]||(s[1]=e=>l.value="grid"),class:h(["p-2 rounded",{"bg-primary text-white":l.value==="grid"}])}," Grid ",2)]),t("button",{onClick:M,class:"btn btn-secondary"}," Export ")])]),t("div",O,[D(t("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>d.value=e),onInput:s[3]||(s[3]=e=>m(k)(d.value)),type:"text",placeholder:"Search members...",class:"input"},null,544),[[E,d.value]])]),o.value.size>0?(i(),r("div",R,[t("div",J,[t("span",q,n(o.value.size)+" members selected",1),(i(),r(v,null,_(["Activate","Deactivate","Delete"],e=>t("button",{key:e,onClick:c=>C(e.toLowerCase()),class:"btn btn-secondary"},n(e),9,G)),64))])])):S("",!0),t("div",H,[l.value==="list"?(i(),r("div",P({key:0},m(f),{class:"overflow-auto max-h-[600px]"}),[t("div",z(B(m(b))),[(i(!0),r(v,null,_(m(x),({data:e})=>(i(),r("div",{key:e.id,class:"flex items-center p-4 border-b border-gray-200 hover:bg-gray-50"},[t("input",{type:"checkbox",checked:o.value.has(e.id),onChange:c=>o.value.has(e.id)?o.value.delete(e.id):o.value.add(e.id),class:"mr-4"},null,40,I),t("div",Q,[t("h3",K,n(e.name),1),t("p",W,n(e.email),1)]),t("div",X,[t("span",{class:h(["px-2 py-1 rounded-full",{"bg-success/20 text-success":e.status==="active","bg-error/20 text-error":e.status==="inactive"}])},n(e.status),3)])]))),128))],16)],16)):(i(),r("div",Y,[(i(!0),r(v,null,_(w.value,e=>(i(),r("div",{key:e.id,class:"bg-gray-50 rounded-lg p-4"},[t("div",Z,[t("input",{type:"checkbox",checked:o.value.has(e.id),onChange:c=>o.value.has(e.id)?o.value.delete(e.id):o.value.add(e.id)},null,40,ee),t("span",{class:h(["px-2 py-1 rounded-full text-sm",{"bg-success/20 text-success":e.status==="active","bg-error/20 text-error":e.status==="inactive"}])},n(e.status),3)]),t("h3",te,n(e.name),1),t("p",se,n(e.email),1),t("p",ae," Membership: "+n(e.membershipType),1),t("p",oe," Joined: "+n(new Date(e.joinDate).toLocaleDateString()),1)]))),128))]))])]))}});export{ie as default};
